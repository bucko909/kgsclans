mysql -se 'SELECT time,games.id,white_id,black_id,mw.clan_id,mb.clan_id,url FROM games INNER JOIN members mw ON games.white_id = mw.id INNER JOIN members mb ON games.black_id = mb.id ORDER BY time DESC'|perl -ne '@t=split/\s+/;$i=-1;for(0..$#s){print"Try: $t[1] / $s[$_][1]\n";if($s[$_][0]>$t[0]+60*10){$i=$_;print"Too early: $t[1] / $s[$_][1]\n";next}if(!($s[$_][4]==$t[4]&&$s[$_][5]==$_[5])&&($s[$_][4]==$t[5]&&$s[$_][5]==$t[4])){print"Clan mismatch: $t[1] / $s[$_][1]\n";next}if($s[$_][2]==$t[2]||$s[$_][2]==$t[3]||$s[$_][3]==$t[2]||$s[$_][3]==$t[3]){print"User match: $t[1] / $s[$_][1]\n";1||next}print"Is awesome: $t[6] ($t[1]) / $s[$_][6] ($s[$_][1])\n"}for(0..$i){shift@s}push@s,[@t]'|less
